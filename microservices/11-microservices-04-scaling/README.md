# Домашнее задание к занятию «Микросервисы: масштабирование»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- поддержка контейнеров;
- обеспечивать обнаружение сервисов и маршрутизацию запросов;
- обеспечивать возможность горизонтального масштабирования;
- обеспечивать возможность автоматического масштабирования;
- обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
- обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.

Обоснуйте свой выбор.

## Ответ

Одним из решений для обеспечения развёртывания, запуска и управления приложениями может быть использование контейнерных оркестраторов, таких как `Kubernetes` или `Docker Swarm`.

`Kubernetes` предоставляет механизмы для автоматизации деплоя, масштабирования и управления контейнеризованными приложениями. Он поддерживает горизонтальное масштабирование приложений путем добавления или удаления экземпляров их компонентов (подов). `Kubernetes` также обеспечивает возможность автоматического масштабирования на основе метрик, например, CPU или памяти.

Для обнаружения сервисов и маршрутизации запросов можно использовать инструменты, такие как `Kubernetes Service` или `Istio Service Mesh`. Оба инструмента предоставляют механизмы для создания виртуальных сервисов и правил маршрутизации, а также имеют встроенную поддержку балансировки нагрузки.

Для явного разделения ресурсов, доступных извне и внутри системы, можно использовать механизмы сетевых политик `Kubernetes` или `Istio`. Сетевые политики позволяют определить, какие коммуникации между подами должны быть разрешены, а какие запрещены.

Для конфигурирования приложений с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п., можно использовать `Kubernetes Secrets` или `Vault`. `Secrets` позволяют хранить и управлять конфиденциальной информацией в Kubernetes, в то время как `Vault` - инструмент для управления секретами и защиты данных.

Таким образом, решение может состоять из следующих компонентов:

`Kubernetes` для оркестрации контейнеров;

`Kubernetes Service` или `Istio Service Mesh` для обнаружения сервисов и маршрутизации запросов;

`Kubernetes Network Policies` или `Istio `для явного разделения ресурсов;

`Kubernetes Secrets` или `Vault` для безопасного хранения чувствительных данных.

`Kubernetes` имеет большую экосистему и сообщество поддержки, что обеспечивает большую базу знаний, документации и инструментов для его использования. `Kubernetes` гибкий и мощный, что делает его подходящим выбором для сложных составных приложений и больших масштабов.